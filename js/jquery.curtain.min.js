!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c),c}:a(jQuery)}(function(a){var b={initState:null,defaultMode:"landscape",swapModeOnOrientationChange:!1,animationDuration:360,animationEasing:"swing"},c=function(c){var e=this,f=a.extend({},b,c),g=d.getCurtainPositioning(e,f),h=d.getElementsDims(e),i="portrait"===d.getCurrentMode(f),j=d.renderAlphaCurtain(i,g,h),k=d.renderBetaCurtain(i,g,h);e.append([j,k]).attr({id:f.id}).css({overflow:"hidden"});var l={close:function(a){var b=d.getCurtainPositioning(e,f),c=a&&a.withoutAnimation?0:f.animationDuration;j.removeClass("curtain-A-opened").addClass("curtain-A-closed"),k.removeClass("curtain-B-opened").addClass("curtain-B-closed");var g=i?{top:"-"+b.top+"px"}:{left:"-"+b.left+"px"};j.animate(g,c,f.animationEasing,function(){j.css({display:"none"})});var h=i?{bottom:"-"+b.bottom+"px"}:{right:"-"+b.right+"px"};k.animate(h,c,f.animationEasing,function(){k.css({display:"none"})})},open:function(a){var b=d.getCurtainPositioning(e,f),c=d.getElementsDims(e),g=j.hasClass("curtain-A-opened")||k.hasClass("curtain-B-opened"),h=a&&a.withoutAnimation||g?0:f.animationDuration;j=d.renderAlphaCurtain(i,b,c,j),k=d.renderBetaCurtain(i,b,c,k),e.append([j,k]),j.removeClass("curtain-A-closed").addClass("curtain-A-opened").css({display:""}),k.removeClass("curtain-B-closed").addClass("curtain-B-opened").css({display:""});var l=i?{top:"0"}:{left:"0"};j.animate(l,h,f.animationEasing);var m=i?{bottom:"0"}:{right:"0"};k.animate(m,h,f.animationEasing)},curtainA:j,curtainB:k},m=e.width()>=a(window).width()||e.height()>=a(window).height();return m&&a(window).on("resize",function(){l.close({withoutAnimation:!0}),i="portrait"===d.getCurrentMode(f)}),"active"===f.initState&&l.open({withoutAnimation:!0}),a.extend({},e,l)},d={getCurrentMode:function(a){var b=a.defaultMode;if(a.portrait&&a.landscape&&a.swapModeOnOrientationChange){var c=d.isOrientationPortrait();switch(a.defaultMode){case"landscape":b=c?"portrait":a.defaultMode;break;case"portrait":b=c?"landscape":a.defaultMode;break;default:console.log("Unkonwn orientation mode"+defaultMode)}}else a.portrait&&!a.landscape&&(b="portrait");return b},renderAlphaCurtain:function(b,c,d,e){var f=this;alphaCurtainElQ=e||a("<div class='curtain-A'></div>");var g=f.getBorderSize(alphaCurtainElQ),h=b?{top:"-"+c.top+"px",left:"0",height:c.top,width:d.innerWidth-2*g+"px"}:{left:"-"+c.left+"px",top:"0",width:c.left,height:d.height+"px"};return h.border=g+"px solid black",alphaCurtainElQ.addClass("curtain-A-closed").css(h),alphaCurtainElQ},renderBetaCurtain:function(b,c,d,e){var f=this;betaCurtainElQ=e||a("<div class='curtain-B'></div>");var g=f.getBorderSize(betaCurtainElQ),h=b?{bottom:"-"+2*c.bottom+"px",right:"0",height:c.bottom,width:d.innerWidth-2*g+"px"}:{right:"-"+2*c.right+"px",bottom:"0",width:c.right,height:d.height+"px"};return h.border=g+"px solid black",betaCurtainElQ.addClass("curtain-B-closed").css(h),betaCurtainElQ},getBorderSize:function(a){var b=this,c=b.getElementsDims(a),d=(c.outerWidth-c.innerWidth)/2;return d},getElementsDims:function(b){var c={outerWidth:b.outerWidth()||b.width(),innerWidth:b.innerWidth()||b.width(),height:b.is("body")?a(window).height():b.height()};return c},getCurtainPositioning:function(a,b){var c=this,d=c.getElementsDims(a),e=d.innerWidth,f=d.height,g=c.getCurrentMode(b),h=b[g]&&b[g].screenRatioCurtainA||0,i=b[g]&&b[g].screenRatioCurtainB||0,j=c.getBorderSize(a.find(".curtain-A")),k=c.getBorderSize(a.find(".curtain-B")),l={left:e*h-2*j,right:e*i-2*k,top:f*h-2*j,bottom:f*i-2*k};return l},isOrientationPortrait:function(){return a(window).innerWidth()<a(window).innerHeight()}};a.fn.curtainify=c});