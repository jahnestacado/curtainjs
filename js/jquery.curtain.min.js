!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c),c}:a(jQuery)}(function(a){var b={initState:"closed",defaultMode:"landscape",swapModeOnOrientationChange:!1,animationDuration:360,animationEasing:"swing"},c=function(c){var e=this,f=a.extend({},b,c),g=d.getCurtainPositioning(e,f),h=d.getElementsDims(e),i=d.getCurrentMode(f),j="portrait"===i,k=d.renderAlphaCurtain(j,g,h),l=d.renderBetaCurtain(j,g,h),m=function(){k.stop(),l.stop()};e.append([k,l]).attr({id:f.id}).css({overflow:"hidden"});var n={close:function(a){m();var b=d.getCurtainPositioning(e,f),c=a&&a.withoutAnimation?0:f.animationDuration;k.removeClass("curtain-A-opened").addClass("curtain-A-closed"),l.removeClass("curtain-B-opened").addClass("curtain-B-closed");var g=j?{top:"-"+b.top+"px"}:{left:"-"+b.left+"px"};k.animate(g,c,f.animationEasing,function(){k.css({display:"none"})});var h=j?{bottom:"-"+b.bottom+"px"}:{right:"-"+b.right+"px"};l.animate(h,c,f.animationEasing,function(){l.css({display:"none"})})},open:function(a){m();var b=d.getCurtainPositioning(e,f),c=d.getElementsDims(e),g=k.hasClass("curtain-A-opened")||l.hasClass("curtain-B-opened"),h=a&&a.withoutAnimation||g?0:f.animationDuration;k=d.renderAlphaCurtain(j,b,c,k),l=d.renderBetaCurtain(j,b,c,l),e.append([k,l]),k.removeClass("curtain-A-closed").addClass("curtain-A-opened").css({display:""}),l.removeClass("curtain-B-closed").addClass("curtain-B-opened").css({display:""});var i=j?{top:"0"}:{left:"0"};k.animate(i,h,f.animationEasing);var n=j?{bottom:"0"}:{right:"0"};l.animate(n,h,f.animationEasing)},curtainA:k,curtainB:l},o=e.width()>=a(window).width()||e.height()>=a(window).height();return a(window).on("resize",function(){if(o)n.close({withoutAnimation:!0}),j="portrait"===d.getCurrentMode(f);else{var a=d.getElementsDims(e),b=Object.keys(h).reduce(function(b,c){return b||h[c]!==a[c]},!1);b&&("open"===f.initState?n.open({withoutAnimation:!0}):n.close({withoutAnimation:!0}),h=a)}}),"open"===f.initState&&n.open({withoutAnimation:!0}),a.extend({},e,n)},d={getCurrentMode:function(a){var b=a.defaultMode;if(a.portrait&&a.landscape&&a.swapModeOnOrientationChange){var c=d.isOrientationPortrait();switch(a.defaultMode){case"landscape":b=c?"portrait":a.defaultMode;break;case"portrait":b=c?"landscape":a.defaultMode;break;default:console.log("Unkonwn orientation mode"+defaultMode)}}else a.portrait&&!a.landscape&&(b="portrait");return b},renderAlphaCurtain:function(b,c,d,e){var f=this;alphaCurtainElQ=e||a("<div class='curtain-A'></div>");var g=f.getBorderSize(alphaCurtainElQ),h=b?{top:"-"+c.top+"px",left:"0",height:c.top,width:d.innerWidth-2*g+"px"}:{left:"-"+c.left+"px",top:"0",width:c.left,height:d.height+"px"};return h.border=g+"px solid black",alphaCurtainElQ.addClass("curtain-A-closed").css(h),alphaCurtainElQ},renderBetaCurtain:function(b,c,d,e){var f=this;betaCurtainElQ=e||a("<div class='curtain-B'></div>");var g=f.getBorderSize(betaCurtainElQ),h=b?{bottom:"-"+2*c.bottom+"px",right:"0",height:c.bottom,width:d.innerWidth-2*g+"px"}:{right:"-"+2*c.right+"px",bottom:"0",width:c.right,height:d.height+"px"};return h.border=g+"px solid black",betaCurtainElQ.addClass("curtain-B-closed").css(h),betaCurtainElQ},getBorderSize:function(a){var b=this,c=b.getElementsDims(a),d=(c.outerWidth-c.innerWidth)/2;return d},getElementsDims:function(b){var c={outerWidth:b.outerWidth()||b.width(),innerWidth:b.innerWidth()||b.width(),height:b.is("body")?a(window).height():b.height()};return c},getCurtainPositioning:function(a,b){var c=this,d=c.getElementsDims(a),e=d.innerWidth,f=d.height,g=c.getCurrentMode(b),h=b[g],i=h&&(h.widthRatioCurtainA||h.heightRatioCurtainA)||0,j=h&&(h.widthRatioCurtainB||h.heightRatioCurtainB)||0,k=c.getBorderSize(a.find(".curtain-A")),l=c.getBorderSize(a.find(".curtain-B")),m={left:e*i-2*k,right:e*j-2*l,top:f*i-2*k,bottom:f*j-2*l};return m},isOrientationPortrait:function(){return a(window).innerWidth()<a(window).innerHeight()}};a.fn.curtainify=c});